<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>radiowhack</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link href="https://fonts.googleapis.com/css2?family=VT323&display=swap" rel="stylesheet">
  <style>
    body{
      font-family:'VT323',monospace;
      background-color:#fff;
      background-image:url('radiowhack-background.jpg');
      background-repeat:no-repeat;
      background-position:center top;
      background-size:cover;
      background-attachment:fixed;
      color:#000;
      margin:20px;
    }
    #app-logo{display:block;margin:0 auto 20px auto;max-width:80%;height:auto}
    h2{ text-align:center; }
    /* FORM & TABLES */
    input,button{font-family:'VT323',monospace;font-size:5vw;padding:5px;margin:5px;border:1px solid #000;background:#fff;color:#000;width:80%;max-width:300px}
    input::placeholder{color:#000}
    table{width:100%;border-collapse:collapse;margin-bottom:30px}
    th,td{border:1px solid #000;padding:8px;text-align:left;font-size:4vw}
    table, th, td{background:transparent}
    tr.highlight{background:rgba(0,0,0,0.08);color:#000}
    /* base: no badge ‚Äî tables will override or script will prepend */
    .winner::before{content:'';}
    /* Override winner badges per table */
    #todayLeaderboard .winner::before      { content:'üèÜ '; }
    #yesterdayLeaderboard .winner::before  { content:'‚≠êÔ∏è '; }
    .subheading{text-align:center;font-size:3vw;margin-bottom:10px}
    @media(min-width:600px){
      input,button{font-size:20px;width:auto;max-width:none}
      th,td{font-size:16px}.subheading{font-size:14px}
    }
    /* STATIC LAYOUT */
    #mainContent{}
    #play-audio-button{
      display:block;
      margin:10px auto;
      font-family:'VT323',monospace;
      font-size:5vw;
      background:#fff;
      color:#002366;
      border:1px solid #002366;
    }
    @media(min-width:600px){
      #play-audio-button{font-size:20px;}
    }
    @media(min-width:600px){
      footer{font-size:10px;}
    }
  </style>
</head>
<body>
  <!-- Static logo -->
  <div id="logoWrap" style="text-align:center">
    <img id="app-logo" src="radiowhack.png" alt="radiowhack">
  </div>

  <div id="mainContent">
    <h2>Enter pocket counts</h2>
    <form id="entryForm">
      <input id="name" type="text" placeholder="Your Name" required>
      <input id="pockets" type="number" placeholder="Pocket Count" required min="0">
      <br><button type="submit">Submit</button>
    </form>

    <div id="message"></div>

    <h2>Today's Leaderboard</h2>
    <p class="subheading">Lowest unique pocket count over zero wins!</p>
    <table id="todayLeaderboard">
      <thead><tr><th>Name</th><th>Pocket Count</th><th>Status</th></tr></thead>
      <tbody></tbody>
    </table>

    <h2 style="margin-bottom:10px">Yesterday's Leaderboard</h2>
    <table id="yesterdayLeaderboard">
      <thead><tr><th>Name</th><th>Pocket Count</th><th>Status</th></tr></thead>
      <tbody></tbody>
    </table>

    <h2 style="margin-bottom:10px">Daily winners</h2>
    <table id="winnersTable">
      <thead><tr><th>Date</th><th>Winner</th></tr></thead>
      <tbody></tbody>
    </table>
  </div>

  <!-- Firebase/game logic -->
  <script type="module" src="radiowhack-app.js"></script>

  <!-- Background audio -->
  <audio id="background-audio" autoplay>
    <source src="radiowhack.mp3" type="audio/mpeg">
  </audio>

  <!-- Mobile autoplay fallback -->
  <script>
    document.addEventListener('DOMContentLoaded',()=>{
      const audio=document.getElementById('background-audio');
      audio.play().catch(()=>{
        const btn=document.createElement('button');
        btn.id='play-audio-button';
        btn.textContent='Play music';
        btn.onclick=()=>{audio.play();btn.remove();};
        document.getElementById('mainContent').insertBefore(btn,document.getElementById('mainContent').firstChild);
      });
    });
  </script>

  <!-- Submit sound -->
  <audio id="submit-sound">
    <source src="https://jackodriley.github.io/pocketwang/sad%20dads%20club%20wake%20word.wav" type="audio/wav">
  </audio>

  <footer style="text-align:center;margin-top:40px;font-size:3vw">v0.4 / ¬© Poquettecorp 2025</footer>

  <script>
    (function(){
      const emojis=['üéß','üìª','üéµ'];
      const tbody=document.querySelector('#winnersTable tbody');
      const decorate=()=>{
        tbody.querySelectorAll('tr').forEach(tr=>{
          const cell=tr.cells[1];
          if(cell && !cell.dataset.decorated && cell.innerText.trim()!=='No winner' && cell.innerText.trim()!=='Pas de gagnant'){
            const emoji=emojis[Math.floor(Math.random()*emojis.length)];
            cell.innerHTML=emoji+' '+cell.innerHTML;
            cell.dataset.decorated='yes';
          }
        });
      };
      new MutationObserver(decorate).observe(tbody,{childList:true});
      decorate();
    })();
  </script>
</body>
</html>